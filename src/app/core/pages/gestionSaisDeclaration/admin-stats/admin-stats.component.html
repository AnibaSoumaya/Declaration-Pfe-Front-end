<div class="dashboard-container" [class.loading]="loading">
  <div class="loader" *ngIf="loading">
    <div class="loader-spinner"></div>
    <div class="loader-text">Chargement des données...</div>
  </div>

  <h1 class="dashboard-title">
    <span>Tableau de bord administratif</span>
    <button class="refresh-btn" (click)="refreshData()" [disabled]="loading">
      <i class="fas fa-sync-alt" [class.fa-spin]="loading"></i>
    </button>
  </h1>

  <!-- Cartes principales -->
  <div class="stats-grid">
    <div class="stat-card orange-gradient">
      <div class="stat-icon">
        <i class="fas fa-file-alt"></i>
      </div>
      <div class="stat-content">
        <h3>Déclarations totales</h3>
        <div class="stat-value">{{ dashboardStats.totalDeclarations || 0 }}</div>
        <div class="stat-subtitle">Toutes les déclarations</div>
      </div>
    </div>

    <div class="stat-card green-gradient">
      <div class="stat-icon">
        <i class="fas fa-users"></i>
      </div>
      <div class="stat-content">
        <h3>Utilisateurs actifs</h3>
        <div class="stat-value">{{ dashboardStats.activeUsers || 0 }}</div>
        <div class="stat-subtitle">Sur {{ dashboardStats.totalUsers || 0 }} total</div>
      </div>
    </div>

    <div class="stat-card blue-gradient">
      <div class="stat-icon">
        <i class="fas fa-user-tie"></i>
      </div>
      <div class="stat-content">
        <h3>Assujettis</h3>
        <div class="stat-value">{{ dashboardStats.totalAssujettis || 0 }}</div>
        <div class="stat-subtitle">{{ dashboardStats.activeAssujettis || 0 }} actifs</div>
      </div>
    </div>

    <div class="stat-card purple-gradient">
      <div class="stat-icon">
        <i class="fas fa-book"></i>
      </div>
      <div class="stat-content">
        <h3>Vocabulaire</h3>
        <div class="stat-value">{{ dashboardStats.totalTerms || 0 }}</div>
        <div class="stat-subtitle">Termes disponibles</div>
      </div>
    </div>
  </div>

  <!-- Graphiques -->
  <div class="charts-container">
    <div class="chart-card">
      <h2><i class="fas fa-chart-bar"></i> Répartition des utilisateurs</h2>
      <div class="chart-wrapper">
        <canvas *ngIf="performanceChartData" 
          baseChart
          [data]="performanceChartData"
          [type]="performanceChartType"
          [options]="performanceChartOptions">
        </canvas>
        <div *ngIf="!performanceChartData" class="no-data">
          Aucune donnée disponible
        </div>
      </div>
    </div>

    <div class="chart-card">
      <h2><i class="fas fa-chart-pie"></i> Statut des déclarations</h2>
      <div class="chart-wrapper">
        <canvas *ngIf="etatChartData"
          baseChart
          [data]="etatChartData"
          [type]="etatChartType"
          [options]="etatChartOptions">
        </canvas>
        <div *ngIf="!etatChartData" class="no-data">
          Aucune donnée disponible
        </div>
      </div>
    </div>

    
  </div>

  <!-- Résumé des données -->
  <div class="summary-section">
    <h2><i class="fas fa-info-circle"></i> Résumé du système</h2>
    <div class="summary-grid">
      <div class="summary-item">
        <div class="summary-label">Utilisateurs</div>
        <div class="summary-details">
          <div>Total: <strong>{{ dashboardStats.totalUsers || 0 }}</strong></div>
          <div>Actifs: <strong>{{ dashboardStats.activeUsers || 0 }}</strong></div>
          <div>Archivés: <strong>{{ dashboardStats.archivedUsers || 0 }}</strong></div>
        </div>
      </div>
      
      <div class="summary-item">
        <div class="summary-label">Assujettis</div>
        <div class="summary-details">
          <div>Total: <strong>{{ dashboardStats.totalAssujettis || 0 }}</strong></div>
          <div>Actifs: <strong>{{ dashboardStats.activeAssujettis || 0 }}</strong></div>
          <div>Archivés: <strong>{{ dashboardStats.archivedAssujettis || 0 }}</strong></div>
        </div>
      </div>
      
      <div class="summary-item">
        <div class="summary-label">Déclarations</div>
        <div class="summary-details">
          <div>Total: <strong>{{ dashboardStats.totalDeclarations || 0 }}</strong></div>
          <div *ngIf="dashboardStats.totalDeclarations === 0" class="no-data-text">
            Aucune déclaration enregistrée
          </div>
        </div>
      </div>
      
      <div class="summary-item">
        <div class="summary-label">Vocabulaire</div>
        <div class="summary-details">
          <div>Termes: <strong>{{ dashboardStats.totalTerms || 0 }}</strong></div>
        </div>
      </div>
    </div>
  </div>

</div>