<div class="dashboard-container">
  <div class="dashboard-header">
    <h1 class="dashboard-title">Tableau de bord - Procureur G√©n√©ral</h1>
    <button 
      type="button" 
      class="refresh-btn"
      (click)="refreshData()"
      [disabled]="isLoading">
      <span *ngIf="!isLoading">üîÑ Actualiser</span>
      <span *ngIf="isLoading">Chargement...</span>
    </button>
  </div>
  
  <!-- Cartes d'informations principales -->
  <div class="info-cards-grid" *ngIf="!isLoading">
    <div class="info-card">
      <div class="info-card-icon" style="background-color: #FFA000;">
        <i class="fas fa-file-alt"></i>
      </div>
      <h3>Total des d√©clarations</h3>
      <div class="big-number">{{ totalDeclarations | number }}</div>
      <div class="info-card-footer">+12% vs mois dernier</div>
    </div>
    
    <div class="info-card">
      <div class="info-card-icon" style="background-color: #4CAF50;">
        <i class="fas fa-folder-open"></i>
      </div>
      <h3>Dossiers en cours</h3>
      <div class="big-number">{{ procureurStats.dossiersEnCours || 0 | number }}</div>
      <div class="info-card-footer">En traitement</div>
    </div>
    
    <div class="info-card">
      <div class="info-card-icon" style="background-color: #FF9800;">
        <i class="fas fa-gavel"></i>
      </div>
      <h3>D√©cisions rendues</h3>
      <div class="big-number">{{ procureurStats.decisionsRendues || 0 | number }}</div>
      <div class="info-card-footer">Ce mois-ci</div>
    </div>
    
    <div class="info-card">
      <div class="info-card-icon" style="background-color: #8BC34A;">
        <i class="fas fa-chart-line"></i>
      </div>
      <h3>Taux d'acceptation</h3>
      <div class="big-number">{{ procureurStats.tauxAcceptation || 0 }}%</div>
      <div class="info-card-footer">Moyenne annuelle</div>
    </div>
  </div>

  <!-- Chargement -->
  <div class="loading-overlay" *ngIf="isLoading">
    <div class="loading-spinner"></div>
    <p>Chargement des donn√©es...</p>
  </div>

  <!-- Grille des graphiques -->
  <div class="charts-grid" *ngIf="!isLoading">
    <!-- Rapports par type -->
    <div class="chart-container">
      <div class="chart-header">
        <h3>Rapports par type</h3>
        <div class="chart-legend">
          <span><span class="legend-color" style="background: #FFA000;"></span> Provisoires</span>
          <span><span class="legend-color" style="background: #4CAF50;"></span> D√©finitifs</span>
        </div>
      </div>
      <div class="chart-wrapper">
        <canvas baseChart
          #pieChart
          [data]="pieChartData"
          [type]="pieChartType"
          [options]="pieChartOptions">
        </canvas>
      </div>
    </div>

    <!-- D√©cisions accept√©es/refus√©es -->
    <div class="chart-container">
      <div class="chart-header">
        <h3>D√©cisions rendues</h3>
        <div class="chart-legend">
          <span><span class="legend-color" style="background: #4CAF50;"></span> Accept√©es</span>
          <span><span class="legend-color" style="background: #FF9800;"></span> Refus√©es</span>
        </div>
      </div>
      <div class="chart-wrapper">
        <canvas baseChart
          #barChart
          [data]="barChartData"
          [type]="barChartType"
          [options]="barChartOptions">
        </canvas>
      </div>
    </div>

<div class="chart-container full-width">
  <div class="chart-header">
    <h3>R√©partition des rapports</h3>
  </div>
  <div class="chart-wrapper">
    <canvas baseChart
      #pieChart
      [data]="pieChartData"
      [type]="pieChartType"
      [options]="pieChartOptions">
    </canvas>
  </div>
</div>
  
    <!-- Statistiques par type de d√©claration -->
    <div class="chart-container">
      <div class="chart-header">
        <h3>Types de d√©clarations</h3>
        <div class="chart-legend">
          <span>R√©partition par cat√©gorie</span>
        </div>
      </div>
      <div class="chart-wrapper">
        <canvas baseChart
          #declarationTypeChart
          [data]="declarationTypeChartData"
          [type]="declarationTypeChartType"
          [options]="declarationTypeChartOptions">
        </canvas>
      </div>
    </div>
  </div>

  <!-- Section de synth√®se -->
  <div class="summary-section" *ngIf="!isLoading">
    <h2>Synth√®se mensuelle</h2>
    <div class="summary-grid">
      <div class="summary-card">
        <div class="summary-icon" style="color: #FF9800;">
          <i class="fas fa-file-import"></i>
        </div>
        <h4>Nouvelles d√©clarations</h4>
        <p class="summary-value">{{ procureurStats.nouvellesDeclarations || 0 | number }}</p>
        <span class="trend positive" *ngIf="procureurStats.tendancePositive">
          <i class="fas fa-arrow-up"></i> +12%
        </span>
        <span class="trend negative" *ngIf="!procureurStats.tendancePositive">
          <i class="fas fa-arrow-down"></i> -5%
        </span>
      </div>
      
      <div class="summary-card">
        <div class="summary-icon" style="color: #4CAF50;">
          <i class="fas fa-folder-minus"></i>
        </div>
        <h4>Dossiers cl√¥tur√©s</h4>
        <p class="summary-value">{{ procureurStats.dossiersClotures || 0 | number }}</p>
      </div>
      
      
      
      <div class="summary-card">
        <div class="summary-icon" style="color: #8BC34A;">
          <i class="fas fa-balance-scale"></i>
        </div>
        <h4>Sanctions appliqu√©es</h4>
        <p class="summary-value">{{ procureurStats.sanctionsAppliquees || 0 | number }}</p>
      </div>
    </div>
  </div>
</div>